#!/bin/bash
# Install/update Fisher plugins when fish_plugins changes
# hash: {{ include "dot_config/fish/fish_plugins" | sha256sum }}

set -euo pipefail

# Skip if fish is not installed
if ! command -v fish &>/dev/null; then
    echo "fish not found, skipping Fisher plugin installation"
    exit 0
fi

# Install Fisher if not present
if ! fish -c "type -q fisher" 2>/dev/null; then
    echo "Installing Fisher..."
    fish -c "curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher install jorgebucaran/fisher"
fi

# Update all plugins from fish_plugins
echo "Updating Fisher plugins..."
fish -c "fisher update"
